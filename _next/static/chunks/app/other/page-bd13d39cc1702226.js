(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[495,680,883],{5410:(e,t,a)=>{"use strict";a.d(t,{CategoryPage:()=>k});var l=a(5155),s=a(6191),o=a(2115),i=a(9584),n=a(572),r=a(7003),c=a(8902),u=a(3136),h=a(8382),d=a(7026),m=a(6362),g=a(7572),p=a(5347);let x=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p.y,l=(0,g.G)(),[s,i]=(0,o.useState)([]),[n,r]=(0,o.useState)({total:0,page:t,totalPages:1,hasNext:!1,hasPrev:!1}),[c,u]=(0,o.useState)(!0),h=async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.page;u(!0);try{let s=await l.getItemsByCategoryPage(e,t,a);i(s.items),r({total:s.total,page:s.page,totalPages:s.totalPages,hasNext:s.hasNext,hasPrev:s.hasPrev})}finally{u(!1)}};(0,o.useEffect)(()=>{h(t)},[e,t,a]);let d=async e=>{e!==n.page&&await h(e)},m=async t=>!!await l.addItem({...t,category:e})&&(1===n.page?await h(1):r(e=>({...e,total:e.total+1,totalPages:Math.ceil((e.total+1)/a),hasNext:e.page<Math.ceil((e.total+1)/a)})),!0),x=async e=>{let t=await l.deleteItem(e);return t&&(i(t=>t.filter(t=>t.id!==e)),1===s.length&&n.hasPrev?await h(n.page-1):s.length<=a&&n.total>s.length?await h(n.page):r(e=>({...e,total:e.total-1,totalPages:Math.ceil((e.total-1)/a),hasNext:e.page<Math.ceil((e.total-1)/a)}))),t};return{items:s,pagination:n,isLoading:c,loadItems:h,addItem:m,updateItem:async(t,a)=>{let s={...a,category:e},o=await l.updateItem(t,s);return o&&i(e=>e.map(e=>e.id===t?{...e,...s}:e)),o},deleteItem:x,changePage:d}};var y=a(3435);function k(e){let{category:t}=e,a=m.s[t],[g,p]=(0,o.useState)(!1),[k,w]=(0,o.useState)(null),[f,v]=(0,o.useState)(null),{items:b,pagination:M,isLoading:j,addItem:N,updateItem:P,deleteItem:C,changePage:I}=x(t),{filteredItems:S,setSearchQuery:A,isSearching:E,searchQuery:O,resultsCount:T,totalCount:V,ratingFilter:_,setRatingFilter:L}=(0,y.M)(b),z=async e=>await N(e),B=async e=>{if(!(null==f?void 0:f.id))return!1;try{return await P(f.id,e),p(!1),v(null),!0}catch(e){return console.error("Error updating item:",e),!1}},F=async e=>{await C(e)};if(j)return(0,l.jsx)("div",{className:"container mx-auto p-4 max-w-4xl",children:(0,l.jsx)(u.k,{message:"Loading ".concat(a.pluralTitle.toLowerCase(),"...")})});let q=b.length>0;return(0,l.jsxs)("div",{className:"container mx-auto p-4 max-w-4xl",children:[(0,l.jsxs)("header",{className:"mb-8",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold mb-2",children:a.pluralTitle}),(0,l.jsx)("p",{className:"text-muted-foreground",children:a.subtitle})]}),(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[(0,l.jsxs)("h2",{className:"text-xl font-semibold",children:[a.pluralTitle," (",M.total,")"]}),(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row items-center gap-3 w-full sm:w-auto",children:[(0,l.jsx)(d.I,{onSearch:A,placeholder:"Search ".concat(a.pluralTitle.toLowerCase(),"..."),className:"w-full sm:w-auto"}),q&&(0,l.jsx)(h.V,{isOpen:g,onOpenChange:e=>{p(e),e||v(null)},onSubmit:f?B:z,title:f?"Edit ".concat(a.title):"Add ".concat(a.title),defaultValues:null!=f?f:{category:t},trigger:(0,l.jsxs)(r.$,{onClick:()=>v(null),children:[(0,l.jsx)(s.A,{className:"h-4 w-4"}),"Add ",a.title]})})]})]}),q&&(0,l.jsx)("div",{className:"mb-4",children:(0,l.jsx)(c.Z,{category:t,ratingFilter:_,onRatingFilterChange:L})}),q?(0,l.jsx)(n.L,{items:S,isSearching:E,searchQuery:O,resultsCount:T,totalCount:V,onItemDelete:F,onItemEdit:e=>{v(e),p(!0)},onItemExpand:e=>{w(k===e?null:e)},expandedItemId:k,pagination:E?void 0:{currentPage:M.page,totalPages:M.totalPages,onPageChange:I}}):(0,l.jsx)(i.p,{onAddClick:()=>{v(null),p(!0)},message:"Your ".concat(a.title.toLowerCase()," collection is empty")}),!q&&(0,l.jsx)(h.V,{isOpen:g,onOpenChange:e=>{p(e),e||v(null)},onSubmit:z,title:"Add First ".concat(a.title),defaultValues:{category:t}})]})}},6362:(e,t,a)=>{"use strict";a.d(t,{s:()=>o});var l=a(1847);let s=(0,l.A)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]),o={book:{title:"Book",pluralTitle:"Books",subtitle:"Manage your book collection",icon:s,route:"/books"},movie:{title:"Movie",pluralTitle:"Movies",subtitle:"Manage your movie collection",icon:(0,l.A)("film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]),route:"/cinema"},other:{title:"Other Item",pluralTitle:"Other Items",subtitle:"Manage your other collectible items",icon:(0,l.A)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]),route:"/other"}}},7842:(e,t,a)=>{Promise.resolve().then(a.bind(a,5410))}},e=>{e.O(0,[707,40,684,336,441,255,358],()=>e(e.s=7842)),_N_E=e.O()}]);