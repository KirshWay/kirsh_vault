(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{1290:()=>{},3479:(e,t,r)=>{"use strict";r.d(t,{NavMenu:()=>f});var n=r(5155),i=r(1847);let a=(0,i.A)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]]);var o=r(5229);let s=(0,i.A)("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]]);var c=r(1733),l=r(2619),d=r.n(l),u=r(63),h=r(2115),v=r(7003),g=r(6362),m=r(5016);let f=()=>{let e=(0,u.usePathname)(),[t,r]=(0,h.useState)(!1),i=Object.values(g.s).map(e=>({title:e.pluralTitle,href:e.route,icon:(0,n.jsx)(e.icon,{className:"h-4 w-4 mr-2"})})),l=[{title:"Home",href:"/",icon:(0,n.jsx)(a,{className:"h-4 w-4 mr-2"})},...i];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"hidden md:flex border-b",children:(0,n.jsx)("div",{className:"container mx-auto flex items-center space-x-1 h-16",children:l.map(t=>(0,n.jsx)(d(),{href:t.href,passHref:!0,children:(0,n.jsx)(v.$,{variant:e===t.href?"default":"ghost",className:"relative h-full rounded-none px-4",asChild:!0,children:(0,n.jsxs)("div",{className:"flex items-center",children:[t.icon,t.title,e===t.href&&(0,n.jsx)(c.P.div,{className:"absolute bottom-0 left-0 right-0 h-1 bg-primary",layoutId:"activeTab",transition:{type:"spring",stiffness:500,damping:30}})]})})},t.href))})}),(0,n.jsxs)("div",{className:"md:hidden border-b",children:[(0,n.jsxs)("div",{className:"container mx-auto flex justify-between items-center h-14",children:[(0,n.jsx)(v.$,{variant:"ghost",onClick:()=>r(!t),className:"p-2",children:t?(0,n.jsx)(o.A,{size:24}):(0,n.jsx)(s,{size:24})}),(0,n.jsx)("div",{className:"font-semibold",children:"Kirsh Vault"}),(0,n.jsx)("div",{className:"w-10"})]}),(0,n.jsx)(c.P.div,{className:(0,m.cn)("absolute w-full bg-background z-50 border-b shadow-lg",!t&&"hidden"),initial:{height:0,opacity:0},animate:{height:t?"auto":0,opacity:+!!t},transition:{duration:.2},children:(0,n.jsx)("div",{className:"container py-4 flex flex-col space-y-1",children:l.map(t=>(0,n.jsx)(d(),{href:t.href,passHref:!0,children:(0,n.jsx)(v.$,{variant:e===t.href?"default":"ghost",className:"w-full justify-start",onClick:()=>r(!1),asChild:!0,children:(0,n.jsxs)("div",{className:"flex items-center",children:[t.icon,t.title]})})},t.href))})})]})]})}},5016:(e,t,r)=>{"use strict";r.d(t,{cn:()=>a});var n=r(2821),i=r(5889);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,i.QP)((0,n.$)(t))}},5958:(e,t,r)=>{"use strict";r.d(t,{ServiceWorkerInit:()=>p});var n=r(2115);try{self["workbox:window:7.2.0"]&&_()}catch(e){}function i(e,t){return new Promise(function(r){var n=new MessageChannel;n.port1.onmessage=function(e){r(e.data)},e.postMessage(t,[n.port2])})}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n.key),n)}}function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}try{self["workbox:core:7.2.0"]&&_()}catch(e){}var c=function(){var e=this;this.promise=new Promise(function(t,r){e.resolve=t,e.reject=r})};function l(e,t){var r=location.href;return new URL(e,r).href===new URL(t,r).href}var d=function(e,t){this.type=e,Object.assign(this,t)};function u(e,t,r){return r?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function h(){}var v={type:"SKIP_WAITING"};function g(e,t){if(!t)return e&&e.then?e.then(h):Promise.resolve()}var m=function(e){function t(t,r){var n,i;return void 0===r&&(r={}),(n=e.call(this)||this).nn={},n.tn=0,n.rn=new c,n.en=new c,n.on=new c,n.un=0,n.an=new Set,n.cn=function(){var e=n.fn,t=e.installing;n.tn>0||!l(t.scriptURL,n.sn.toString())||performance.now()>n.un+6e4?(n.vn=t,e.removeEventListener("updatefound",n.cn)):(n.hn=t,n.an.add(t),n.rn.resolve(t)),++n.tn,t.addEventListener("statechange",n.ln)},n.ln=function(e){var t=n.fn,r=e.target,i=r.state,a=r===n.vn,o={sw:r,isExternal:a,originalEvent:e};!a&&n.mn&&(o.isUpdate=!0),n.dispatchEvent(new d(i,o)),"installed"===i?n.wn=self.setTimeout(function(){"installed"===i&&t.waiting===r&&n.dispatchEvent(new d("waiting",o))},200):"activating"===i&&(clearTimeout(n.wn),a||n.en.resolve(r))},n.yn=function(e){var t=n.hn,r=t!==navigator.serviceWorker.controller;n.dispatchEvent(new d("controlling",{isExternal:r,originalEvent:e,sw:t,isUpdate:n.mn})),r||n.on.resolve(t)},i=function(e){var t=e.data,r=e.ports,i=e.source;return u(n.getSW(),function(){n.an.has(i)&&n.dispatchEvent(new d("message",{data:t,originalEvent:e,ports:r,sw:i}))})},n.gn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(i.apply(this,e))}catch(e){return Promise.reject(e)}},n.sn=t,n.nn=r,navigator.serviceWorker.addEventListener("message",n.gn),n}t.prototype=Object.create(e.prototype),t.prototype.constructor=t,o(t,e);var r,n,s=t.prototype;return s.register=function(e){var t=(void 0===e?{}:e).immediate,r=void 0!==t&&t;try{var n,i,a,o=this;return u((n=function(){if(!r&&"complete"!==document.readyState)return g(new Promise(function(e){return window.addEventListener("load",e)}))},i=function(){return o.mn=!!navigator.serviceWorker.controller,o.dn=o.pn(),u(o.bn(),function(e){o.fn=e,o.dn&&(o.hn=o.dn,o.en.resolve(o.dn),o.on.resolve(o.dn),o.dn.addEventListener("statechange",o.ln,{once:!0}));var t=o.fn.waiting;return t&&l(t.scriptURL,o.sn.toString())&&(o.hn=t,Promise.resolve().then(function(){o.dispatchEvent(new d("waiting",{sw:t,wasWaitingBeforeRegister:!0}))}).then(function(){})),o.hn&&(o.rn.resolve(o.hn),o.an.add(o.hn)),o.fn.addEventListener("updatefound",o.cn),navigator.serviceWorker.addEventListener("controllerchange",o.yn),o.fn})},(a=n())&&a.then?a.then(i):i(a)))}catch(e){return Promise.reject(e)}},s.update=function(){try{return this.fn?u(g(this.fn.update())):u()}catch(e){return Promise.reject(e)}},s.getSW=function(){return void 0!==this.hn?Promise.resolve(this.hn):this.rn.promise},s.messageSW=function(e){try{return u(this.getSW(),function(t){return i(t,e)})}catch(e){return Promise.reject(e)}},s.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&i(this.fn.waiting,v)},s.pn=function(){var e=navigator.serviceWorker.controller;return e&&l(e.scriptURL,this.sn.toString())?e:void 0},s.bn=function(){try{var e=this;return u(function(e,t){try{var r=e()}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}(function(){return u(navigator.serviceWorker.register(e.sn,e.nn),function(t){return e.un=performance.now(),t})},function(e){throw e}))}catch(e){return Promise.reject(e)}},r=[{key:"active",get:function(){return this.en.promise}},{key:"controlling",get:function(){return this.on.promise}}],a(t.prototype,r),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(function(){function e(){this.Pn=new Map}var t=e.prototype;return t.addEventListener=function(e,t){this.jn(e).add(t)},t.removeEventListener=function(e,t){this.jn(e).delete(t)},t.dispatchEvent=function(e){e.target=this;for(var t,r=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return s(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,void 0):void 0}}(e))){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(this.jn(e.type));!(t=r()).done;)(0,t.value)(e)},t.jn=function(e){return this.Pn.has(e)||this.Pn.set(e,new Set),this.Pn.get(e)},e}()),f=r(9542);function p(){return(0,n.useEffect)(()=>{!function(){if("serviceWorker"in navigator&&void 0!==window.workbox){let e=(0,f.DT)(),t=new m("".concat(e,"/service-worker.js"));t.addEventListener("installed",e=>{console.log("Service Worker installed:",e)}),t.addEventListener("activated",e=>{console.log("Service Worker activated:",e)}),t.addEventListener("controlling",e=>{console.log("Service Worker controls the page:",e)}),t.addEventListener("waiting",e=>{console.log("Service Worker waiting for activation:",e)}),t.register().then(e=>{console.log("Service Worker registered:",e)}).catch(e=>{console.error("Error registering Service Worker:",e)})}}()},[]),null}},6362:(e,t,r)=>{"use strict";r.d(t,{s:()=>a});var n=r(1847);let i=(0,n.A)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]),a={book:{title:"Book",pluralTitle:"Books",subtitle:"Manage your book collection",icon:i,route:"/books"},movie:{title:"Movie",pluralTitle:"Movies",subtitle:"Manage your movie collection",icon:(0,n.A)("film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]),route:"/cinema"},other:{title:"Other Item",pluralTitle:"Other Items",subtitle:"Manage your other collectible items",icon:(0,n.A)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]),route:"/other"}}},6372:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,1290,23)),Promise.resolve().then(r.bind(r,3479)),Promise.resolve().then(r.bind(r,5958)),Promise.resolve().then(r.bind(r,7572)),Promise.resolve().then(r.bind(r,2663))},7003:(e,t,r)=>{"use strict";r.d(t,{$:()=>c});var n=r(5155),i=r(2467),a=r(3101);r(2115);var o=r(5016);let s=(0,a.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function c(e){let{className:t,variant:r,size:a,asChild:c=!1,...l}=e,d=c?i.DX:"button";return(0,n.jsx)(d,{"data-slot":"button",className:(0,o.cn)(s({variant:r,size:a,className:t})),...l})}},7572:(e,t,r)=>{"use strict";r.d(t,{DbProvider:()=>d,G:()=>u});var n=r(5155),i=r(2115),a=r(2663),o=r(3278);class s extends o.Ay{async getAllItems(){return this.items.orderBy("createdAt").reverse().toArray()}async getItemsByCategory(e){return this.items.where("category").equals(e).sortBy("createdAt",e=>e.reverse())}async getItemsPage(e,t){let r=await this.items.count(),n=Math.ceil(r/t);return{items:await this.items.orderBy("createdAt").reverse().offset((e-1)*t).limit(t).toArray(),total:r,page:e,totalPages:n,hasNext:e<n,hasPrev:e>1}}async getItemsByCategoryPage(e,t,r){let n=(t-1)*r,i=await this.items.where("category").equals(e).count(),a=Math.ceil(i/r);return{items:await this.items.where("category").equals(e).sortBy("createdAt",e=>e.reverse().slice(n,n+r)),total:i,page:t,totalPages:a,hasNext:t<a,hasPrev:t>1}}async addItem(e){let t=new Date;return this.items.add({...e,createdAt:t})}async updateItem(e,t){await this.items.update(e,t)}async deleteItem(e){await this.items.delete(e)}async getItem(e){return this.items.get(e)}constructor(){super("kirshVault"),this.version(1).stores({items:"++id, name, createdAt, category"})}}let c=new s,l=(0,i.createContext)(void 0),d=e=>{let{children:t}=e,[r,o]=(0,i.useState)(!0);(0,i.useEffect)(()=>{(async()=>{try{await c.getAllItems(),o(!1)}catch(e){console.error("Failed to initialize database:",e),a.oR.error("Failed to initialize database")}})()},[]);let s=async()=>{try{return await c.getAllItems()}catch(e){return console.error("Error getting all items:",e),a.oR.error("Failed to load items"),[]}},d=async e=>{try{return await c.getItemsByCategory(e)}catch(t){return console.error("Error getting ".concat(e," items:"),t),a.oR.error("Failed to load ".concat(e," items")),[]}},u=async(e,t)=>{try{return await c.getItemsPage(e,t)}catch(t){return console.error("Error getting items page:",t),a.oR.error("Failed to load items"),{items:[],total:0,page:e,totalPages:0,hasNext:!1,hasPrev:!1}}},h=async(e,t,r)=>{try{return await c.getItemsByCategoryPage(e,t,r)}catch(r){return console.error("Error getting ".concat(e," items page:"),r),a.oR.error("Failed to load ".concat(e," items")),{items:[],total:0,page:t,totalPages:0,hasNext:!1,hasPrev:!1}}},v=async e=>{try{let t=await c.addItem({name:e.name,description:e.description,category:e.category,images:e.images||[],rating:e.rating});return a.oR.success("Item added successfully"),t}catch(e){return console.error("Error adding item:",e),a.oR.error("Failed to add item"),!1}},g=async(e,t)=>{try{return await c.updateItem(e,t),a.oR.success("Item updated successfully"),!0}catch(e){return console.error("Error updating item:",e),a.oR.error("Failed to update item"),!1}},m=async e=>{try{return await c.deleteItem(e),a.oR.success("Item deleted successfully"),!0}catch(e){return console.error("Error deleting item:",e),a.oR.error("Failed to delete item"),!1}},f=async e=>{try{return await c.getItem(e)}catch(t){console.error("Error getting item ".concat(e,":"),t),a.oR.error("Failed to load item");return}};return(0,n.jsx)(l.Provider,{value:{isLoading:r,getAllItems:s,getItemsByCategory:d,getItemsPage:u,getItemsByCategoryPage:h,addItem:v,updateItem:g,deleteItem:m,getItem:f},children:t})},u=()=>{let e=(0,i.useContext)(l);if(void 0===e)throw Error("useDb must be used within a DbProvider");return e}},9542:(e,t,r)=>{"use strict";r.d(t,{AO:()=>i,DT:()=>n});let n=()=>window.location.pathname.startsWith("/kirsh_vault")?"/kirsh_vault":"",i=e=>{let t=n();if(e.startsWith(t+"/")||e===t)return e;let r=e.startsWith("/")?e:"/".concat(e);return"".concat(t).concat(r)}}},e=>{e.O(0,[741,707,40,176,441,255,358],()=>e(e.s=6372)),_N_E=e.O()}]);