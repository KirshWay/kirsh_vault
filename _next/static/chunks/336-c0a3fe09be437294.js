"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[336],{572:(e,t,a)=>{a.d(t,{L:()=>P});var r=a(5155),s=a(1733),n=a(1408),i=a(2196),l=a(4033),o=a(8514),c=a(7135),d=a(2115),m=a(7003),u=a(5016);function x(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card",className:(0,u.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...a})}function p(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-header",className:(0,u.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...a})}function h(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-content",className:(0,u.cn)("px-6",t),...a})}function g(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-footer",className:(0,u.cn)("flex items-center px-6 [.border-t]:pt-6",t),...a})}var f=a(368),j=a(7937),v=a(4679);function y(e){let{images:t,open:a,onOpenChange:s,initialIndex:n=0}=e,[i,l]=(0,d.useState)(n);(0,d.useEffect)(()=>{a&&l(n)},[a,n]),(0,d.useEffect)(()=>{if(!a)return;let e=e=>{"ArrowLeft"===e.key?o():"ArrowRight"===e.key?c():"Escape"===e.key&&s(!1)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[a,i,t.length]);let o=()=>{l(e=>e>0?e-1:t.length-1)},c=()=>{l(e=>e<t.length-1?e+1:0)};return t.length?(0,r.jsx)(v.lG,{open:a,onOpenChange:s,modal:!0,children:(0,r.jsxs)(v.Cf,{className:"max-w-4xl w-full h-[80vh] sm:h-[50vh] p-0 gap-0 bg-background/90 backdrop-blur-sm shadow-2xl","data-testid":"image-viewer",children:[(0,r.jsx)(v.L3,{className:"sr-only",children:"Image Viewer"}),(0,r.jsxs)("div",{className:"w-full h-full flex flex-col",children:[(0,r.jsxs)("div",{className:"relative flex-1 flex items-center justify-center p-4",children:[(0,r.jsx)("img",{src:t[i],alt:"Image ".concat(i+1),className:"max-h-[70vh] max-w-full object-contain"}),t.length>1&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.$,{variant:"ghost",size:"icon",className:"absolute left-0 sm:left-2 rounded-full bg-black/40 hover:bg-black/60 text-white cursor-pointer",onClick:o,children:(0,r.jsx)(f.A,{className:"h-5 w-5 sm:h-6 sm:w-6"})}),(0,r.jsx)(m.$,{variant:"ghost",size:"icon",className:"absolute right-0 sm:right-2 rounded-full bg-black/40 hover:bg-black/60 text-white cursor-pointer",onClick:c,children:(0,r.jsx)(j.A,{className:"h-5 w-5 sm:h-6 sm:w-6"})})]})]}),t.length>1&&(0,r.jsx)("div",{className:"p-2 overflow-x-auto",children:(0,r.jsx)("div",{className:"flex space-x-2 justify-center",children:t.map((e,t)=>(0,r.jsx)("button",{className:(0,u.cn)("w-12 h-12 sm:w-16 sm:h-16 rounded-md overflow-hidden flex-shrink-0 border-2 transition-all cursor-pointer",i===t?"border-primary":"border-transparent opacity-60 hover:opacity-100"),onClick:()=>l(t),children:(0,r.jsx)("img",{src:e,alt:"Thumbnail ".concat(t+1),className:"w-full h-full object-cover"})},t))})})]})]})}):null}var N=a(920),b=a(2168);let w=e=>{let{item:t,onDelete:a,onEdit:n,isExpanded:f,onExpand:j}=e,[v,w]=(0,d.useState)(!1),[k,C]=(0,d.useState)(0),A=t.images||[],P=A.length>0,z=P?A[0]:null,I=P?A.length-1:0,R=e=>{C(e),w(!0)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.P.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.2},children:(0,r.jsxs)(x,{className:"h-full flex flex-col overflow-hidden",children:[z?(0,r.jsxs)("div",{className:"w-full h-48 relative overflow-hidden group cursor-pointer",onClick:()=>R(0),children:[(0,r.jsx)("img",{src:z,alt:t.name,className:"w-full h-full object-cover"}),I>0&&(0,r.jsxs)("div",{className:"absolute bottom-2 right-2 px-2 py-1 bg-black/60 text-white text-xs rounded-full flex items-center gap-1",children:[(0,r.jsx)(i.A,{size:12}),"+",I]}),(0,r.jsx)("div",{className:"absolute inset-0 bg-black/30 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:(0,r.jsxs)("span",{className:"text-white text-sm font-medium",children:["View ",A.length>1?"images":"image"]})})]}):(0,r.jsx)("div",{className:"w-full h-40 bg-muted flex items-center justify-center",children:(0,r.jsx)(i.A,{className:"h-10 w-10 text-muted-foreground opacity-50","data-testid":"image-icon"})}),(0,r.jsx)(p,{className:"pb-2",children:(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold line-clamp-2",children:t.name}),(0,r.jsxs)("div",{className:"flex items-center mt-1",children:[(0,r.jsx)("span",{className:"text-xs px-2 py-1 bg-secondary rounded-full",children:b.R[t.category]||t.category}),(0,r.jsx)("span",{className:"text-xs text-muted-foreground ml-2",children:new Date(t.createdAt).toLocaleDateString()})]}),void 0!==t.rating&&t.rating>0&&"other"!==t.category&&(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsx)(N.G,{value:t.rating,size:"sm",readonly:!0})})]}),(0,r.jsx)(m.$,{variant:"ghost",size:"sm",className:"p-0 h-8 w-8 cursor-pointer",onClick:j,children:(0,r.jsx)(l.A,{className:(0,u.cn)("h-4 w-4 transition-transform",f?"transform rotate-180":"")})})]})}),(0,r.jsxs)(h,{className:(0,u.cn)("transition-all duration-300 overflow-hidden",f?"max-h-96":"max-h-0 p-0"),children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:t.description||"No description"}),A.length>1&&(0,r.jsx)("div",{className:"mt-3 overflow-x-auto pb-2",children:(0,r.jsx)("div",{className:"flex gap-2 flex-nowrap min-w-0",children:A.map((e,a)=>(0,r.jsx)("div",{className:"w-14 h-14 sm:w-16 sm:h-16 flex-shrink-0 rounded-md overflow-hidden cursor-pointer ring-offset-background transition-all hover:ring-2 hover:ring-ring hover:ring-offset-2",onClick:()=>R(a),children:(0,r.jsx)("img",{src:e,alt:"".concat(t.name," thumbnail ").concat(a+1),className:"w-full h-full object-cover"})},a))})})]}),(0,r.jsx)(g,{className:"mt-auto pt-4",children:(0,r.jsxs)("div",{className:"flex justify-end w-full gap-2",children:[(0,r.jsxs)(m.$,{variant:"outline",size:"sm",className:"h-8 cursor-pointer",onClick:n,children:[(0,r.jsx)(o.A,{className:"h-3.5 w-3.5 mr-1"}),"Edit"]}),(0,r.jsxs)(m.$,{variant:"destructive",size:"sm",className:"h-8 cursor-pointer",onClick:a,children:[(0,r.jsx)(c.A,{className:"h-3.5 w-3.5 mr-1"}),"Delete"]})]})})]})}),P&&(0,r.jsx)(y,{images:A,open:v,onOpenChange:w,initialIndex:k})]})};var k=a(9584),C=a(7772);function A(e){let{currentPage:t,totalPages:a,onPageChange:s,className:n}=e;return a<=1?null:(0,r.jsxs)("nav",{role:"navigation","aria-label":"Pagination",className:(0,u.cn)("flex justify-center items-center mx-auto space-x-1",n),children:[(0,r.jsx)(m.$,{variant:"outline",size:"sm",className:"h-8 w-8 p-0 cursor-pointer",disabled:1===t,onClick:()=>s(t-1),"aria-label":"Go to previous page",children:(0,r.jsx)(f.A,{className:"h-4 w-4"})}),(()=>{let e=[];if(a<=5)for(let t=1;t<=a;t++)e.push(t);else{e.push(1);let r=Math.max(2,t-1),s=Math.min(a-1,t+1);t<=2?s=3:t>=a-1&&(r=a-2),r>2&&e.push("ellipsis-start");for(let t=r;t<=s;t++)e.push(t);s<a-1&&e.push("ellipsis-end"),e.push(a)}return e})().map((e,a)=>"ellipsis-start"===e||"ellipsis-end"===e?(0,r.jsx)("div",{className:"flex items-center justify-center h-8 w-8","aria-label":"Ellipsis",children:(0,r.jsx)(C.A,{className:"h-4 w-4"})},"ellipsis-".concat(a)):(0,r.jsx)(m.$,{variant:t===e?"default":"outline",size:"sm",className:"h-8 w-8 p-0 cursor-pointer",onClick:()=>s(Number(e)),"aria-label":"Go to page ".concat(e),"aria-current":t===e?"page":void 0,children:e},e)),(0,r.jsx)(m.$,{variant:"outline",size:"sm",className:"h-8 w-8 p-0 cursor-pointer",disabled:t===a,onClick:()=>s(t+1),"aria-label":"Go to next page",children:(0,r.jsx)(j.A,{className:"h-4 w-4"})})]})}let P=e=>{let{items:t,isSearching:a,searchQuery:i,resultsCount:l,totalCount:o,onItemDelete:c,onItemEdit:d,onItemExpand:m,expandedItemId:u,pagination:x}=e;return a&&0===t.length?(0,r.jsx)(s.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},className:"my-8",children:(0,r.jsx)(k.p,{message:'Nothing found for "'.concat(i,'"')})}):(0,r.jsxs)(r.Fragment,{children:[a&&(0,r.jsxs)(s.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mb-4 text-sm text-muted-foreground",children:["Found: ",l," of ",o]}),(0,r.jsx)(s.P.div,{variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}},initial:"hidden",animate:"visible",className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:(0,r.jsx)(n.N,{children:t.map(e=>(0,r.jsx)(w,{item:e,onDelete:()=>void 0!==e.id&&c(e.id),onEdit:()=>d(e),isExpanded:u===e.id,onExpand:()=>void 0!==e.id&&m(e.id)},e.id))})}),x&&x.totalPages>1&&(0,r.jsx)("div",{className:"mt-8 flex justify-center",children:(0,r.jsx)(A,{currentPage:x.currentPage,totalPages:x.totalPages,onPageChange:x.onPageChange})})]})}},920:(e,t,a)=>{a.d(t,{G:()=>l});var r=a(5155),s=a(9347),n=a(2115),i=a(5016);function l(e){let{value:t=0,onChange:a,maxValue:l=10,size:o="md",showValue:c=!0,className:d,readonly:m=!1}=e,[u,x]=(0,n.useState)(null),p={sm:"w-3 h-3",md:"w-4 h-4",lg:"w-5 h-5"},h=null!==u?u:t;return(0,r.jsxs)("div",{className:(0,i.cn)("flex items-center",d),"data-testid":"star-rating",children:[(0,r.jsx)("div",{className:(0,i.cn)("flex items-center",{sm:"gap-0.5",md:"gap-1",lg:"gap-1.5"}[o]),children:[...Array(l)].map((e,n)=>{let l=n+1,c=h>=l;return(0,r.jsx)("div",{className:(0,i.cn)("relative cursor-pointer text-yellow-400",m&&"cursor-default"),onClick:()=>{var e;return e=l,void(!m&&(null==a||a(t===e?0:e)))},onMouseEnter:()=>!m&&x(l),onMouseLeave:()=>!m&&x(null),children:(0,r.jsx)(s.A,{className:(0,i.cn)(p[o],"transition-colors duration-150",c?"fill-yellow-400":"stroke-yellow-400 fill-transparent")})},n)})}),c&&(0,r.jsxs)("span",{className:(0,i.cn)("ml-2 font-medium","sm"===o&&"text-xs","md"===o&&"text-sm","lg"===o&&"text-base"),children:[t,"/10"]})]})}},2168:(e,t,a)=>{a.d(t,{R:()=>r});let r={book:"Book",movie:"Movie",other:"Other"}},3136:(e,t,a)=>{a.d(t,{k:()=>s});var r=a(5155);function s(e){let{message:t="Loading..."}=e;return(0,r.jsx)("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin h-8 w-8 border-t-2 border-primary rounded-full mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:t})]})})}a(2115)},3435:(e,t,a)=>{a.d(t,{M:()=>s});var r=a(2115);function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},[a,s]=(0,r.useState)(""),[n,i]=(0,r.useState)(null),[l,o]=(0,r.useState)(null),{searchFields:c=["name","description"],minScore:d=.3,limitResults:m=50}=t,u=(0,r.useMemo)(()=>{let t=[...e];if(l&&(t=t.filter(e=>e.category===l)),n&&(t=t.filter(e=>{if("other"===e.category)return!0;if(void 0===e.rating)return!1;switch(n.type){case"min":return e.rating>=(n.minValue||0);case"max":return e.rating<=(n.maxValue||10);case"exact":return e.rating===n.exactValue;case"range":return e.rating>=(n.minValue||0)&&e.rating<=(n.maxValue||10);case"preset":switch(n.presetName){case"high":return e.rating>=7;case"medium":return e.rating>=4&&e.rating<=6;case"low":return e.rating>=1&&e.rating<=3;default:return!0}default:return!0}})),!a.trim())return t;let r=a.toLowerCase().trim().split(/\s+/);return t.map(e=>{let t=0,a=c.length*r.length;return c.forEach(a=>{let s=String(e[a]||"").toLowerCase();r.forEach(e=>{"name"===a&&s===e?t+=2:s.includes(" ".concat(e))||s.startsWith(e)?t+=1.5:s.includes(e)&&(t+=1)})}),{item:e,score:a>0?t/a:0}}).filter(e=>e.score>=d).sort((e,t)=>t.score-e.score).slice(0,m).map(e=>e.item)},[e,a,n,l,c,d,m]);return{searchQuery:a,setSearchQuery:s,ratingFilter:n,setRatingFilter:i,categoryFilter:l,setCategoryFilter:o,filteredItems:u,isSearching:a.trim().length>0,isFiltering:null!==n||null!==l,resultsCount:u.length,totalCount:e.length}}},4679:(e,t,a)=>{a.d(t,{Cf:()=>u,L3:()=>p,c7:()=>x,lG:()=>o,zM:()=>c});var r=a(5155),s=a(9511),n=a(5229),i=a(2115),l=a(5016);let o=s.bL,c=s.l9,d=s.ZL;d.displayName=s.ZL.displayName;let m=i.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(s.hJ,{ref:t,className:(0,l.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...n})});m.displayName=s.hJ.displayName;let u=i.forwardRef((e,t)=>{let{className:a,containerClassName:i,children:o,...c}=e;return(0,r.jsxs)(d,{children:[(0,r.jsx)(m,{}),(0,r.jsx)(s.UC,{ref:t,className:(0,l.cn)("fixed z-50 grid w-full gap-4 border bg-background shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95","md:left-[50%] md:top-[50%] md:max-w-lg md:translate-x-[-50%] md:translate-y-[-50%] md:rounded-lg md:p-6","md:data-[state=closed]:slide-out-to-left-1/2 md:data-[state=closed]:slide-out-to-top-[48%] md:data-[state=open]:slide-in-from-left-1/2 md:data-[state=open]:slide-in-from-top-[48%]","max-md:p-4 max-md:rounded-t-lg max-md:max-h-[85vh] max-md:overflow-y-auto max-md:overflow-x-hidden","max-md:bottom-0 max-md:left-0 max-md:right-0 max-md:top-auto max-md:translate-y-0 max-md:border-b-0","max-md:data-[state=closed]:slide-out-to-bottom-0 max-md:data-[state=open]:slide-in-from-bottom-0",a),...c,children:(0,r.jsxs)("div",{className:(0,l.cn)("relative",i),children:[o,(0,r.jsxs)(s.bm,{className:"absolute right-2 top-2 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(n.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})})]})});u.displayName=s.UC.displayName;let x=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};x.displayName="DialogHeader";let p=i.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(s.hE,{ref:t,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",a),...n})});p.displayName=s.hE.displayName,i.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(s.VY,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",a),...n})}).displayName=s.VY.displayName},5016:(e,t,a)=>{a.d(t,{cn:()=>n});var r=a(2821),s=a(5889);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}},5347:(e,t,a)=>{a.d(t,{M:()=>i,y:()=>n});var r=a(2115),s=a(7572);let n=12,i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n,a=(0,s.G)(),[i,l]=(0,r.useState)([]),[o,c]=(0,r.useState)(null),[d,m]=(0,r.useState)({total:0,page:e,totalPages:1,hasNext:!1,hasPrev:!1}),[u,x]=(0,r.useState)(!0),p=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.page;x(!0);try{let r=await a.getItemsPage(e,t);l(r.items),m({total:r.total,page:r.page,totalPages:r.totalPages,hasNext:r.hasNext,hasPrev:r.hasPrev})}finally{x(!1)}};(0,r.useEffect)(()=>{p(e)},[e,t]);let h=async e=>{e!==d.page&&await p(e)},g=async e=>{let r=await a.addItem(e);if("number"==typeof r){let e=await a.getItem(r);e&&1===d.page?l(a=>[e,...a].slice(0,t)):await p(d.page)}else!1!==r&&await p(d.page);return!1!==r},f=async e=>{let r=await a.deleteItem(e);return r&&(l(t=>t.filter(t=>t.id!==e)),1===i.length&&d.hasPrev?await p(d.page-1):i.length<=t&&d.total>i.length?await p(d.page):m(e=>({...e,total:e.total-1,totalPages:Math.ceil((e.total-1)/t),hasNext:e.page<Math.ceil((e.total-1)/t)}))),r};return{items:i,pagination:d,isLoading:u,expandedItemId:o,addItem:g,updateItem:async(e,t)=>{let r=await a.updateItem(e,t);return r&&l(a=>a.map(a=>a.id===e?{...a,name:t.name,description:t.description,category:t.category,images:t.images||[],rating:t.rating}:a)),r},deleteItem:f,toggleExpandItem:e=>{c(o===e?null:e)},changePage:h,loadItems:p}}},6170:(e,t,a)=>{a.d(t,{p:()=>n});var r=a(5155);a(2115);var s=a(5016);function n(e){let{className:t,type:a,...n}=e;return(0,r.jsx)("input",{type:a,"data-slot":"input",className:(0,s.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...n})}},7003:(e,t,a)=>{a.d(t,{$:()=>o});var r=a(5155),s=a(2467),n=a(3101);a(2115);var i=a(5016);let l=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function o(e){let{className:t,variant:a,size:n,asChild:o=!1,...c}=e,d=o?s.DX:"button";return(0,r.jsx)(d,{"data-slot":"button",className:(0,i.cn)(l({variant:a,size:n,className:t})),...c})}},7026:(e,t,a)=>{a.d(t,{I:()=>m});var r=a(5155),s=a(6651),n=a(5229),i=a(1733),l=a(2115),o=a(7003),c=a(6170),d=a(5016);function m(e){let{onSearch:t,placeholder:a="Search...",className:m,initialValue:u="",autoFocus:x=!1}=e,[p,h]=(0,l.useState)(u),[g,f]=(0,l.useState)(x);return(0,l.useEffect)(()=>{let e=setTimeout(()=>{t(p)},300);return()=>clearTimeout(e)},[p,t]),(0,r.jsx)("div",{className:(0,d.cn)("relative flex items-center transition-all duration-200 group",g?"w-full":"w-[180px] sm:w-[220px]",m),children:(0,r.jsxs)(i.P.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.2},className:"relative w-full",children:[(0,r.jsx)(s.A,{className:(0,d.cn)("absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 transition-colors",g?"text-primary":"text-muted-foreground")}),(0,r.jsx)(c.p,{type:"text",value:p,onChange:e=>h(e.target.value),placeholder:a,className:(0,d.cn)("w-full pl-9 pr-9 transition-all focus-visible:ring-primary",g?"border-primary":""),onFocus:()=>f(!0),onBlur:()=>f(!1),autoFocus:x}),p&&(0,r.jsx)(o.$,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 -translate-y-1/2 h-7 w-7 p-0 cursor-pointer",onClick:()=>{h(""),t("")},type:"button",children:(0,r.jsx)(n.A,{className:"h-4 w-4"})})]})})}},7572:(e,t,a)=>{a.d(t,{DbProvider:()=>d,G:()=>m});var r=a(5155),s=a(2115),n=a(2663),i=a(3278);class l extends i.Ay{async getAllItems(){return this.items.orderBy("createdAt").reverse().toArray()}async getItemsByCategory(e){return this.items.where("category").equals(e).sortBy("createdAt",e=>e.reverse())}async getItemsPage(e,t){let a=await this.items.count(),r=Math.ceil(a/t);return{items:await this.items.orderBy("createdAt").reverse().offset((e-1)*t).limit(t).toArray(),total:a,page:e,totalPages:r,hasNext:e<r,hasPrev:e>1}}async getItemsByCategoryPage(e,t,a){let r=(t-1)*a,s=await this.items.where("category").equals(e).count(),n=Math.ceil(s/a);return{items:await this.items.where("category").equals(e).sortBy("createdAt",e=>e.reverse().slice(r,r+a)),total:s,page:t,totalPages:n,hasNext:t<n,hasPrev:t>1}}async addItem(e){let t=new Date;return this.items.add({...e,createdAt:t})}async updateItem(e,t){await this.items.update(e,t)}async deleteItem(e){await this.items.delete(e)}async getItem(e){return this.items.get(e)}constructor(){super("kirshVault"),this.version(1).stores({items:"++id, name, createdAt, category"})}}let o=new l,c=(0,s.createContext)(void 0),d=e=>{let{children:t}=e,[a,i]=(0,s.useState)(!0);(0,s.useEffect)(()=>{(async()=>{try{await o.getAllItems(),i(!1)}catch(e){console.error("Failed to initialize database:",e),n.oR.error("Failed to initialize database")}})()},[]);let l=async()=>{try{return await o.getAllItems()}catch(e){return console.error("Error getting all items:",e),n.oR.error("Failed to load items"),[]}},d=async e=>{try{return await o.getItemsByCategory(e)}catch(t){return console.error("Error getting ".concat(e," items:"),t),n.oR.error("Failed to load ".concat(e," items")),[]}},m=async(e,t)=>{try{return await o.getItemsPage(e,t)}catch(t){return console.error("Error getting items page:",t),n.oR.error("Failed to load items"),{items:[],total:0,page:e,totalPages:0,hasNext:!1,hasPrev:!1}}},u=async(e,t,a)=>{try{return await o.getItemsByCategoryPage(e,t,a)}catch(a){return console.error("Error getting ".concat(e," items page:"),a),n.oR.error("Failed to load ".concat(e," items")),{items:[],total:0,page:t,totalPages:0,hasNext:!1,hasPrev:!1}}},x=async e=>{try{let t=await o.addItem({name:e.name,description:e.description,category:e.category,images:e.images||[],rating:e.rating});return n.oR.success("Item added successfully"),t}catch(e){return console.error("Error adding item:",e),n.oR.error("Failed to add item"),!1}},p=async(e,t)=>{try{return await o.updateItem(e,t),n.oR.success("Item updated successfully"),!0}catch(e){return console.error("Error updating item:",e),n.oR.error("Failed to update item"),!1}},h=async e=>{try{return await o.deleteItem(e),n.oR.success("Item deleted successfully"),!0}catch(e){return console.error("Error deleting item:",e),n.oR.error("Failed to delete item"),!1}},g=async e=>{try{return await o.getItem(e)}catch(t){console.error("Error getting item ".concat(e,":"),t),n.oR.error("Failed to load item");return}};return(0,r.jsx)(c.Provider,{value:{isLoading:a,getAllItems:l,getItemsByCategory:d,getItemsPage:m,getItemsByCategoryPage:u,addItem:x,updateItem:p,deleteItem:h,getItem:g},children:t})},m=()=>{let e=(0,s.useContext)(c);if(void 0===e)throw Error("useDb must be used within a DbProvider");return e}},8382:(e,t,a)=>{a.d(t,{V:()=>Y});var r=a(5155),s=a(3602),n=a(2115),i=a(2544),l=a(4879),o=a(7003),c=a(1786),d=a(5229),m=a(2196),u=a(1636),x=a(2663),p=a(5016);function h(e){let{images:t=[],onChange:a,maxFiles:s=5,maxSize:i=5242880,accept:l={"image/*":[".jpeg",".jpg",".png",".webp"]},className:h}=e,[g,f]=(0,n.useState)(!1),j=(0,n.useCallback)((e,r)=>{if(r.length>0)return void r.forEach(e=>{e.errors.forEach(t=>{"file-too-large"===t.code&&x.oR.error("File ".concat(e.file.name," is too large. Max size is ").concat(i/1024/1024,"MB")),"file-invalid-type"===t.code&&x.oR.error("File ".concat(e.file.name," has an invalid file type"))})});if(e.length>0){let r=[...t];e.forEach(n=>{if(r.length>=s)return void x.oR.error("Maximum ".concat(s," images allowed"));let i=new FileReader;i.onload=()=>{i.result&&(r.push(i.result.toString()),(r.length===t.length+e.length||r.length===s)&&a(r))},i.readAsDataURL(n)})}},[t,s,i,a]),{getRootProps:v,getInputProps:y,isDragActive:N}=(0,u.VB)({onDrop:j,maxFiles:s,maxSize:i,accept:l});return(0,r.jsxs)("div",{className:(0,p.cn)("space-y-4",h),children:[(0,r.jsxs)("div",{...v(),className:(0,p.cn)("border-2 border-dashed rounded-lg p-4 text-center cursor-pointer transition-colors",N?"border-primary/70 bg-primary/5":g?"border-primary/50 bg-primary/5":"border-muted-foreground/25 hover:border-primary/50 hover:bg-primary/5"),onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),children:[(0,r.jsx)("input",{...y()}),(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center gap-2 py-4",children:[(0,r.jsx)(c.A,{className:(0,p.cn)("h-10 w-10",N||g?"text-primary":"text-muted-foreground")}),N?(0,r.jsx)("p",{className:"text-primary font-medium",children:"Drop the files here..."}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{className:"font-medium",children:"Drag & drop images here, or click to select"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Supports JPEG, PNG, WebP • Max ".concat(s," files • Max ").concat(i/1024/1024,"MB each")})]})]})]}),t.length>0&&(0,r.jsxs)("div",{className:"grid grid-cols-2 xs:grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-2 mt-4",children:[t.map((e,s)=>(0,r.jsxs)("div",{className:"group relative aspect-square rounded-md overflow-hidden border border-muted",children:[(0,r.jsx)("img",{src:e,alt:"Upload ".concat(s+1),className:"h-full w-full object-cover"}),(0,r.jsx)("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:(0,r.jsx)(o.$,{type:"button",size:"icon",variant:"destructive",className:"h-8 w-8",onClick:e=>{e.stopPropagation();let r=[...t];r.splice(s,1),a(r)},children:(0,r.jsx)(d.A,{className:"h-4 w-4"})})})]},s)),t.length<s&&(0,r.jsxs)("div",{...v(),className:"aspect-square rounded-md border border-dashed border-muted-foreground/25 flex items-center justify-center cursor-pointer hover:border-primary/50 hover:bg-primary/5 transition-colors",children:[(0,r.jsx)("input",{...y()}),(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,r.jsx)(m.A,{className:"h-8 w-8 text-muted-foreground/70"}),(0,r.jsx)("span",{className:"text-xs text-muted-foreground mt-1",children:"Add more"})]})]})]})]})}var g=a(2467),f=a(489);function j(e){let{className:t,...a}=e;return(0,r.jsx)(f.b,{"data-slot":"label",className:(0,p.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...a})}let v=i.Op,y=n.createContext({}),N=e=>{let{...t}=e;return(0,r.jsx)(y.Provider,{value:{name:t.name},children:(0,r.jsx)(i.xI,{...t})})},b=()=>{let e=n.useContext(y),t=n.useContext(w),{getFieldState:a}=(0,i.xW)(),r=(0,i.lN)({name:e.name}),s=a(e.name,r);if(!e)throw Error("useFormField should be used within <FormField>");let{id:l}=t;return{id:l,name:e.name,formItemId:"".concat(l,"-form-item"),formDescriptionId:"".concat(l,"-form-item-description"),formMessageId:"".concat(l,"-form-item-message"),...s}},w=n.createContext({});function k(e){let{className:t,...a}=e,s=n.useId();return(0,r.jsx)(w.Provider,{value:{id:s},children:(0,r.jsx)("div",{"data-slot":"form-item",className:(0,p.cn)("grid gap-2",t),...a})})}function C(e){let{className:t,...a}=e,{error:s,formItemId:n}=b();return(0,r.jsx)(j,{"data-slot":"form-label","data-error":!!s,className:(0,p.cn)("data-[error=true]:text-destructive",t),htmlFor:n,...a})}function A(e){let{...t}=e,{error:a,formItemId:s,formDescriptionId:n,formMessageId:i}=b();return(0,r.jsx)(g.DX,{"data-slot":"form-control",id:s,"aria-describedby":a?"".concat(n," ").concat(i):"".concat(n),"aria-invalid":!!a,...t})}function P(e){var t;let{className:a,...s}=e,{error:n,formMessageId:i}=b(),l=n?String(null!=(t=null==n?void 0:n.message)?t:""):s.children;return l?(0,r.jsx)("p",{"data-slot":"form-message",id:i,className:(0,p.cn)("text-destructive text-sm",a),...s,children:l}):null}var z=a(6170),I=a(4304),R=a(4033),E=a(2108),F=a(5917);let S=I.bL;I.YJ;let V=I.WT,M=n.forwardRef((e,t)=>{let{className:a,children:s,...n}=e;return(0,r.jsxs)(I.l9,{ref:t,className:(0,p.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...n,children:[s,(0,r.jsx)(I.In,{asChild:!0,children:(0,r.jsx)(R.A,{className:"h-4 w-4 opacity-50"})})]})});M.displayName=I.l9.displayName;let L=n.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(I.PP,{ref:t,className:(0,p.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,r.jsx)(E.A,{className:"h-4 w-4"})})});L.displayName=I.PP.displayName;let $=n.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(I.wn,{ref:t,className:(0,p.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,r.jsx)(R.A,{className:"h-4 w-4"})})});$.displayName=I.wn.displayName;let D=n.forwardRef((e,t)=>{let{className:a,children:s,position:n="popper",...i}=e;return(0,r.jsx)(I.ZL,{children:(0,r.jsxs)(I.UC,{ref:t,className:(0,p.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:n,...i,children:[(0,r.jsx)(L,{}),(0,r.jsx)(I.LM,{className:(0,p.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,r.jsx)($,{})]})})});D.displayName=I.UC.displayName,n.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(I.JU,{ref:t,className:(0,p.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...s})}).displayName=I.JU.displayName;let B=n.forwardRef((e,t)=>{let{className:a,children:s,...n}=e;return(0,r.jsxs)(I.q7,{ref:t,className:(0,p.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(I.VF,{children:(0,r.jsx)(F.A,{className:"h-4 w-4"})})}),(0,r.jsx)(I.p4,{children:s})]})});B.displayName=I.q7.displayName,n.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(I.wv,{ref:t,className:(0,p.cn)("-mx-1 my-1 h-px bg-muted",a),...s})}).displayName=I.wv.displayName;var G=a(920);function U(e){let{className:t,...a}=e;return(0,r.jsx)("textarea",{"data-slot":"textarea",className:(0,p.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...a})}let _=l.Ik({name:l.Yj().min(1,{message:"Name is required"}),description:l.Yj().optional(),category:l.k5(["book","movie","other"],{required_error:"Please select a category"}),images:l.YO(l.Yj()).optional(),rating:l.ai().min(0).max(10).optional()}),q=e=>{let{defaultValues:t,onSubmit:a,onCancel:l}=e,[c,d]=(0,n.useState)((null==t?void 0:t.images)||[]),[m,u]=(0,n.useState)((null==t?void 0:t.rating)||0),[x,p]=(0,n.useState)((null==t?void 0:t.category)||"other"),g=(0,i.mN)({resolver:(0,s.u)(_),defaultValues:{name:(null==t?void 0:t.name)||"",description:(null==t?void 0:t.description)||"",category:(null==t?void 0:t.category)||"other",images:(null==t?void 0:t.images)||[],rating:(null==t?void 0:t.rating)||0}});(0,n.useEffect)(()=>{g.setValue("images",c)},[c,g]),(0,n.useEffect)(()=>{g.setValue("rating",m)},[m,g]);let f=e=>{u(e)},j=e=>{p(e),"other"===e&&u(0),g.setValue("category",e)};return(0,r.jsx)(v,{...g,children:(0,r.jsxs)("form",{onSubmit:g.handleSubmit(e=>{a({...e,images:c,rating:"other"===x?0:m})}),className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-4 md:col-span-1",children:[(0,r.jsx)(N,{control:g.control,name:"name",render:e=>{let{field:t}=e;return(0,r.jsxs)(k,{children:[(0,r.jsx)(C,{children:"Name"}),(0,r.jsx)(A,{children:(0,r.jsx)(z.p,{placeholder:"Item name",...t})}),(0,r.jsx)(P,{})]})}}),(0,r.jsx)(N,{control:g.control,name:"category",render:e=>{let{field:t}=e;return(0,r.jsxs)(k,{children:[(0,r.jsx)(C,{children:"Category"}),(0,r.jsxs)(S,{onValueChange:j,defaultValue:t.value,children:[(0,r.jsx)(A,{children:(0,r.jsx)(M,{children:(0,r.jsx)(V,{placeholder:"Select a category"})})}),(0,r.jsxs)(D,{children:[(0,r.jsx)(B,{value:"book",children:"Book"}),(0,r.jsx)(B,{value:"movie",children:"Movie"}),(0,r.jsx)(B,{value:"other",children:"Other"})]})]}),(0,r.jsx)(P,{})]})}}),(0,r.jsx)(N,{control:g.control,name:"description",render:e=>{let{field:t}=e;return(0,r.jsxs)(k,{children:[(0,r.jsx)(C,{children:"Description"}),(0,r.jsx)(A,{children:(0,r.jsx)(U,{placeholder:"Optional description",className:"resize-none min-h-[120px]",...t})}),(0,r.jsx)(P,{})]})}}),"other"!==x&&(0,r.jsx)(N,{control:g.control,name:"rating",render:()=>(0,r.jsxs)(k,{children:[(0,r.jsx)(C,{children:"Rating"}),(0,r.jsx)(A,{children:(0,r.jsx)(G.G,{value:m,onChange:f,size:"md"})}),(0,r.jsx)(P,{})]})})]}),(0,r.jsx)("div",{className:"md:col-span-1",children:(0,r.jsxs)(k,{children:[(0,r.jsx)(C,{children:"Images"}),(0,r.jsx)(A,{children:(0,r.jsx)(h,{images:c,onChange:e=>{d(e)},maxFiles:5,maxSize:0xa00000,accept:{"image/*":[".jpeg",".jpg",".png",".webp"]}})}),(0,r.jsx)(P,{})]})})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-2 pt-2",children:[(0,r.jsx)(o.$,{type:"button",variant:"outline",className:"cursor-pointer",onClick:l,children:"Cancel"}),(0,r.jsxs)(o.$,{type:"submit",className:"cursor-pointer",children:[(null==t?void 0:t.name)?"Update":"Add"," Item"]})]})]})})};var O=a(4679);let Y=e=>{let{trigger:t,isOpen:a,onOpenChange:s,onSubmit:n,title:i,defaultValues:l}=e,o=async e=>{await n(e)&&s(!1)};return(0,r.jsxs)(O.lG,{open:a,onOpenChange:s,children:[t&&(0,r.jsx)(O.zM,{asChild:!0,children:t}),(0,r.jsxs)(O.Cf,{className:"sm:max-w-[425px]",children:[(0,r.jsx)(O.c7,{children:(0,r.jsx)(O.L3,{children:i})}),(0,r.jsx)(q,{defaultValues:l,onSubmit:o,onCancel:()=>{s(!1)}})]})]})}},8902:(e,t,a)=>{a.d(t,{Z:()=>F});var r=a(5155),s=a(6955),n=a(235),i=a(5917),l=a(9347),o=a(5229),c=a(1733),d=a(2115),m=a(3101),u=a(5016);let x=(0,m.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function p(e){let{className:t,variant:a,...s}=e;return(0,r.jsx)("div",{className:(0,u.cn)(x({variant:a}),t),...s})}var h=a(7003),g=a(5736),f=a(7937),j=a(9051);let v=g.bL,y=g.l9,N=g.YJ,b=g.ZL,w=g.Pb,k=g.z6,C=d.forwardRef((e,t)=>{let{className:a,inset:s,children:n,...i}=e;return(0,r.jsxs)(g.ZP,{ref:t,className:(0,u.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",s&&"pl-8",a),...i,children:[n,(0,r.jsx)(f.A,{className:"ml-auto h-4 w-4"})]})});C.displayName=g.ZP.displayName;let A=d.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(g.G5,{ref:t,className:(0,u.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...s})});A.displayName=g.G5.displayName;let P=d.forwardRef((e,t)=>{let{className:a,sideOffset:s=4,...n}=e;return(0,r.jsx)(g.ZL,{children:(0,r.jsx)(g.UC,{ref:t,sideOffset:s,className:(0,u.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})})});P.displayName=g.UC.displayName;let z=d.forwardRef((e,t)=>{let{className:a,inset:s,...n}=e;return(0,r.jsx)(g.q7,{ref:t,className:(0,u.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s&&"pl-8",a),...n})});z.displayName=g.q7.displayName,d.forwardRef((e,t)=>{let{className:a,children:s,checked:n,...l}=e;return(0,r.jsxs)(g.H_,{ref:t,className:(0,u.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:n,...l,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(g.VF,{children:(0,r.jsx)(i.A,{className:"h-4 w-4"})})}),s]})}).displayName=g.H_.displayName,d.forwardRef((e,t)=>{let{className:a,children:s,...n}=e;return(0,r.jsxs)(g.hN,{ref:t,className:(0,u.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(g.VF,{children:(0,r.jsx)(j.A,{className:"h-2 w-2 fill-current"})})}),s]})}).displayName=g.hN.displayName;let I=d.forwardRef((e,t)=>{let{className:a,inset:s,...n}=e;return(0,r.jsx)(g.JU,{ref:t,className:(0,u.cn)("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",a),...n})});I.displayName=g.JU.displayName;let R=d.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(g.wv,{ref:t,className:(0,u.cn)("-mx-1 my-1 h-px bg-muted",a),...s})});R.displayName=g.wv.displayName;var E=a(2168);function F(e){let{category:t,ratingFilter:a,onRatingFilterChange:m,showCategoryFilter:x=!1,categoryFilter:g=null,onCategoryFilterChange:f,className:j}=e,[F,S]=(0,d.useState)(!1),V="other"!==t;if(!V&&!x)return null;let M=null!==a||null!==g;return(0,r.jsxs)("div",{className:(0,u.cn)("flex flex-wrap items-center gap-2",j),children:[(0,r.jsxs)(v,{open:F,onOpenChange:S,children:[(0,r.jsx)(y,{asChild:!0,children:(0,r.jsxs)(h.$,{variant:"outline",size:"sm",className:(0,u.cn)("gap-1.5 text-sm group cursor-pointer",M?"bg-primary/5 border-primary/20":""),children:[(0,r.jsx)(s.A,{className:(0,u.cn)("h-4 w-4 transition-colors",M?"text-primary":"text-muted-foreground group-hover:text-foreground")}),"Filters",M&&(0,r.jsx)(p,{variant:"secondary",className:"ml-1 rounded-sm px-1 py-0 h-5",children:+!!a+ +!!g})]})}),(0,r.jsxs)(P,{align:"start",className:"w-56",children:[(0,r.jsx)(I,{children:"Filters"}),(0,r.jsx)(R,{}),x&&f&&(0,r.jsx)(N,{children:(0,r.jsxs)(w,{children:[(0,r.jsxs)(C,{children:[(0,r.jsx)(n.A,{className:"mr-2 h-4 w-4 text-blue-500"}),(0,r.jsx)("span",{className:"cursor-pointer",children:"Category"})]}),(0,r.jsx)(b,{children:(0,r.jsxs)(A,{children:[(0,r.jsxs)(z,{onClick:()=>f(null),className:"cursor-pointer",children:[(0,r.jsx)(i.A,{className:(0,u.cn)("mr-2 h-4 w-4",null===g?"opacity-100":"opacity-0")}),(0,r.jsx)("span",{children:"All categories"})]}),(0,r.jsx)(R,{}),(0,r.jsxs)(z,{onClick:()=>f("book"),className:"cursor-pointer",children:[(0,r.jsx)(i.A,{className:(0,u.cn)("mr-2 h-4 w-4","book"===g?"opacity-100":"opacity-0")}),(0,r.jsx)("span",{children:"Books"})]}),(0,r.jsxs)(z,{onClick:()=>f("movie"),className:"cursor-pointer",children:[(0,r.jsx)(i.A,{className:(0,u.cn)("mr-2 h-4 w-4","movie"===g?"opacity-100":"opacity-0")}),(0,r.jsx)("span",{children:"Movies"})]}),(0,r.jsxs)(z,{onClick:()=>f("other"),className:"cursor-pointer",children:[(0,r.jsx)(i.A,{className:(0,u.cn)("mr-2 h-4 w-4","other"===g?"opacity-100":"opacity-0")}),(0,r.jsx)("span",{children:"Other"})]})]})})]})}),V&&(0,r.jsx)(N,{children:(0,r.jsxs)(w,{children:[(0,r.jsxs)(C,{children:[(0,r.jsx)(l.A,{className:"mr-2 h-4 w-4 text-yellow-500"}),(0,r.jsx)("span",{className:"cursor-pointer",children:"Rating"})]}),(0,r.jsx)(b,{children:(0,r.jsx)(A,{children:(0,r.jsxs)(k,{value:a?"active":"",onValueChange:e=>{""===e&&m(null)},children:[(0,r.jsxs)(z,{onClick:()=>m(null),className:"cursor-pointer",children:[(0,r.jsx)(i.A,{className:(0,u.cn)("mr-2 h-4 w-4",null===a?"opacity-100":"opacity-0")}),(0,r.jsx)("span",{className:"cursor-pointer",children:"Any rating"})]}),(0,r.jsx)(R,{}),(0,r.jsx)(I,{className:"text-xs",children:"Presets"}),(0,r.jsxs)(z,{onClick:()=>m({type:"preset",presetName:"high"}),className:"cursor-pointer",children:[(0,r.jsx)(i.A,{className:(0,u.cn)("mr-2 h-4 w-4",(null==a?void 0:a.type)==="preset"&&(null==a?void 0:a.presetName)==="high"?"opacity-100":"opacity-0")}),(0,r.jsx)("span",{children:"High rating (7-10)"})]}),(0,r.jsxs)(z,{onClick:()=>m({type:"preset",presetName:"medium"}),className:"cursor-pointer",children:[(0,r.jsx)(i.A,{className:(0,u.cn)("mr-2 h-4 w-4",(null==a?void 0:a.type)==="preset"&&(null==a?void 0:a.presetName)==="medium"?"opacity-100":"opacity-0")}),(0,r.jsx)("span",{children:"Medium rating (4-6)"})]}),(0,r.jsxs)(z,{onClick:()=>m({type:"preset",presetName:"low"}),className:"cursor-pointer",children:[(0,r.jsx)(i.A,{className:(0,u.cn)("mr-2 h-4 w-4",(null==a?void 0:a.type)==="preset"&&(null==a?void 0:a.presetName)==="low"?"opacity-100":"opacity-0")}),(0,r.jsx)("span",{children:"Low rating (1-3)"})]}),(0,r.jsx)(R,{}),(0,r.jsx)(I,{className:"text-xs",children:"Minimum rating"}),[1,2,3,4,5,6,7,8,9].map(e=>(0,r.jsxs)(z,{onClick:()=>m({type:"min",minValue:e}),className:"cursor-pointer",children:[(0,r.jsx)(i.A,{className:(0,u.cn)("mr-2 h-4 w-4",(null==a?void 0:a.type)==="min"&&(null==a?void 0:a.minValue)===e?"opacity-100":"opacity-0")}),(0,r.jsxs)("span",{children:[e,"+ stars"]})]},"min-".concat(e)))]})})})]})}),M&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(R,{}),(0,r.jsxs)(z,{onClick:()=>{m(null),f&&f(null)},children:[(0,r.jsx)(o.A,{className:"mr-2 h-4 w-4"}),(0,r.jsx)("span",{className:"cursor-pointer",children:"Clear all filters"})]})]})]})]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2",children:[g&&(0,r.jsx)(c.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95},children:(0,r.jsxs)(p,{variant:"secondary",className:"flex items-center gap-1.5 h-8 px-3 cursor-default",children:[(0,r.jsx)(n.A,{className:"h-3.5 w-3.5 text-blue-500"}),E.R[g]||g,(0,r.jsxs)(h.$,{variant:"ghost",size:"sm",className:"h-5 w-5 p-0 ml-1 rounded-full cursor-pointer",onClick:()=>f&&f(null),children:[(0,r.jsx)(o.A,{className:"h-3 w-3"}),(0,r.jsx)("span",{className:"sr-only",children:"Clear filter"})]})]})}),a&&(0,r.jsx)(c.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95},children:(0,r.jsxs)(p,{variant:"secondary",className:"flex items-center gap-1.5 h-8 px-3 cursor-default",children:[(0,r.jsx)(l.A,{className:"h-3.5 w-3.5 text-yellow-500"}),(()=>{if(!a)return"";switch(a.type){case"min":return"".concat(a.minValue,"+ stars");case"max":return"Up to ".concat(a.maxValue," stars");case"exact":return"Exactly ".concat(a.exactValue," stars");case"range":return"".concat(a.minValue,"-").concat(a.maxValue," stars");case"preset":switch(a.presetName){case"high":return"High rating (7-10)";case"medium":return"Medium rating (4-6)";case"low":return"Low rating (1-3)";default:return""}default:return""}})(),(0,r.jsxs)(h.$,{variant:"ghost",size:"sm",className:"h-5 w-5 p-0 ml-1 rounded-full",onClick:()=>m(null),children:[(0,r.jsx)(o.A,{className:"h-3 w-3"}),(0,r.jsx)("span",{className:"sr-only",children:"Clear filter"})]})]})})]})]})}},9584:(e,t,a)=>{a.d(t,{p:()=>i});var r=a(5155),s=a(6191),n=a(7003);let i=e=>{let{onAddClick:t,message:a}=e;return(0,r.jsxs)("div",{className:"border border-dashed rounded-lg p-8 flex flex-col items-center justify-center text-center min-h-[300px]",children:[t&&(0,r.jsx)("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mb-4",children:(0,r.jsx)(s.A,{className:"h-8 w-8 text-primary"})}),(0,r.jsx)("h3",{className:"text-lg font-medium mb-2",children:a||"Your collection is empty"}),(0,r.jsx)("p",{className:"text-muted-foreground mb-6 max-w-md",children:t?"Start adding items to your collection. You can add books, movies, or other items.":""}),t&&(0,r.jsxs)(n.$,{className:"cursor-pointer",onClick:t,children:[(0,r.jsx)(s.A,{className:"h-4 w-4"}),"Add First Item"]})]})}}}]);