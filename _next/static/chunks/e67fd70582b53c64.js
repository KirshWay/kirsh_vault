(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,15995,e=>{"use strict";var t=e.i(43476),a=e.i(3908),a=a,l=e.i(71645),s=e.i(24851),i=e.i(7928),n=e.i(67881),r=e.i(24450),o=e.i(9715),c=e.i(65449),u=e.i(69486),d=e.i(75086),m=e.i(28697),g=e.i(21110),h=e.i(2568);function x({category:e}){let x=d.CATEGORY_CONFIG[e],[p,w]=(0,l.useState)(!1),[f,j]=(0,l.useState)(null),[y,P]=(0,l.useState)(null),{items:S,pagination:C,isLoading:N,addItem:I,updateItem:b,deleteItem:v,changePage:E}=((e,t=1,a=g.DEFAULT_PAGE_SIZE)=>{let s=(0,m.useDb)(),[i,n]=(0,l.useState)([]),[r,o]=(0,l.useState)({total:0,page:t,totalPages:1,hasNext:!1,hasPrev:!1}),[c,u]=(0,l.useState)(!0),d=async(t=r.page)=>{u(!0);try{let l=await s.getItemsByCategoryPage(e,t,a);n(l.items),o({total:l.total,page:l.page,totalPages:l.totalPages,hasNext:l.hasNext,hasPrev:l.hasPrev})}finally{u(!1)}};(0,l.useEffect)(()=>{d(t)},[e,t,a]);let h=async e=>{e!==r.page&&await d(e)},x=async t=>!!await s.addItem({...t,category:e})&&(1===r.page?await d(1):o(e=>({...e,total:e.total+1,totalPages:Math.ceil((e.total+1)/a),hasNext:e.page<Math.ceil((e.total+1)/a)})),!0),p=async e=>{let t=await s.deleteItem(e);return t&&(n(t=>t.filter(t=>t.id!==e)),1===i.length&&r.hasPrev?await d(r.page-1):i.length<=a&&r.total>i.length?await d(r.page):o(e=>({...e,total:e.total-1,totalPages:Math.ceil((e.total-1)/a),hasNext:e.page<Math.ceil((e.total-1)/a)}))),t};return{items:i,pagination:r,isLoading:c,loadItems:d,addItem:x,updateItem:async(t,a)=>{let l={...a,category:e},i=await s.updateItem(t,l);return i&&n(e=>e.map(e=>e.id===t?{...e,...l}:e)),i},deleteItem:p,changePage:h}})(e),{filteredItems:T,setSearchQuery:A,isSearching:F,searchQuery:O,resultsCount:L,totalCount:M,ratingFilter:$,setRatingFilter:B}=(0,h.useSearchItems)(S),R=async e=>await I(e),D=async e=>{if(!y?.id)return!1;try{return await b(y.id,e),w(!1),P(null),!0}catch(e){return console.error("Error updating item:",e),!1}},G=async e=>{await v(e)};if(N)return(0,t.jsx)("div",{className:"container mx-auto p-4 max-w-4xl",children:(0,t.jsx)(o.LoadingSpinner,{message:`Loading ${x.pluralTitle.toLowerCase()}...`})});let U=S.length>0;return(0,t.jsxs)("div",{className:"container mx-auto p-4 max-w-4xl",children:[(0,t.jsxs)("header",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-2",children:x.pluralTitle}),(0,t.jsx)("p",{className:"text-muted-foreground",children:x.subtitle})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[(0,t.jsxs)("h2",{className:"text-xl font-semibold",children:[x.pluralTitle," (",C.total,")"]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row items-center gap-3 w-full sm:w-auto",children:[(0,t.jsx)(u.SearchBar,{onSearch:A,placeholder:`Search ${x.pluralTitle.toLowerCase()}...`,className:"w-full sm:w-auto"}),U&&(0,t.jsx)(c.ItemFormModal,{isOpen:p,onOpenChange:e=>{w(e),e||P(null)},onSubmit:y?D:R,title:y?`Edit ${x.title}`:`Add ${x.title}`,defaultValues:y??{category:e},trigger:(0,t.jsxs)(n.Button,{onClick:()=>P(null),children:[(0,t.jsx)(a.default,{className:"h-4 w-4"}),"Add ",x.title]})})]})]}),U&&(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsx)(r.FilterPanel,{category:e,ratingFilter:$,onRatingFilterChange:B})}),U?(0,t.jsx)(i.SearchResults,{items:T,isSearching:F,searchQuery:O,resultsCount:L,totalCount:M,onItemDelete:G,onItemEdit:e=>{P(e),w(!0)},onItemExpand:e=>{j(f===e?null:e)},expandedItemId:f,pagination:F?void 0:{currentPage:C.page,totalPages:C.totalPages,onPageChange:E}}):(0,t.jsx)(s.EmptyState,{onAddClick:()=>{P(null),w(!0)},message:`Your ${x.title.toLowerCase()} collection is empty`}),!U&&(0,t.jsx)(c.ItemFormModal,{isOpen:p,onOpenChange:e=>{w(e),e||P(null)},onSubmit:R,title:`Add First ${x.title}`,defaultValues:{category:e}})]})}e.s(["CategoryPage",()=>x],15995)}]);